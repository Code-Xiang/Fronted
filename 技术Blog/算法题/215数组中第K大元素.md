### åŠ›æ‰£215.æ•°ç»„ä¸­ç¬¬Kå¤§å…ƒç´ ï¼ˆå †æ’åºã€å¿«æ’åºï¼‰[`javaScript`]

ç»™å®šæ•´æ•°æ•°ç»„ `nums` å’Œæ•´æ•° `k`ï¼Œè¯·è¿”å›æ•°ç»„ä¸­ç¬¬`k`ä¸ªæœ€å¤§çš„å…ƒç´ ã€‚

è¯·æ³¨æ„ï¼Œä½ éœ€è¦æ‰¾çš„æ˜¯æ•°ç»„æ’åºåçš„ç¬¬ `k` ä¸ªæœ€å¤§çš„å…ƒç´ ï¼Œè€Œä¸æ˜¯ç¬¬ `k` ä¸ªä¸åŒçš„å…ƒç´ ã€‚

ä½ å¿…é¡»è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º `O(n)` çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜ã€‚

> ç¤ºä¾‹1ï¼š
>
> > è¾“å…¥ï¼š`[3,2,1,5,6,4]` ,k=2
> >
> > è¾“å‡ºï¼š5

> ç¤ºä¾‹2ï¼š
>
> > è¾“å…¥ï¼š`[3,2,3,1,2,4,5,5,6]`,k=4
> >
> > è¾“å‡ºï¼š4

é¦–å…ˆè¿™é¢˜éœ€è¦ç¬¬`k`å¤§çš„å…ƒç´ ï¼Œå³å°†æ•°ç»„æ’åºåï¼Œ`index`+1ä¸‹æ ‡çš„å…ƒç´ åˆ™æ˜¯ï¼Œç¬¬`index`+1å¤§çš„å…ƒç´ ã€‚

éœ€è¦æ—¶é—´å¤æ‚åº¦ä¸º`O(n)`çš„ç®—æ³•ã€‚å¦‚æœç”¨å¸¸è§„çš„å†…ç½®å‡½æ•°çš„æ’åºå¾ˆéš¾è¾¾åˆ°è¿™æ ·çš„æ—¶é—´å¤æ‚åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬è€ƒè™‘åˆ°ä½¿ç”¨å †æ’åºå’Œå¿«æ’åºè¿™ä¸¤ç§æ–¹æ³•ã€‚å…¶ä¸­å †æ’åºåœ¨å¾ˆå¤šå¤§å‚çš„æœºè¯•ä¸Šéœ€è¦ä¼šçš„ã€‚æ¨èä¼˜å…ˆç†è§£å †æ’åºã€‚

---

#### å †æ’åº

- ç¬¬ n ä¸ªå…ƒç´ çš„ å·¦å­èŠ‚ç‚¹ ä¸º` 2*n+1`

- ç¬¬ n ä¸ªå…ƒç´ çš„ å³å­èŠ‚ç‚¹ ä¸º `2*n+2`

- ç¬¬ n ä¸ªå…ƒç´ çš„ çˆ¶èŠ‚ç‚¹ ä¸º `(n-1)/2`

- æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹ä¸º `Math.floor(arr.length/2)-1`

  å †æ˜¯å…·æœ‰ä»¥ä¸‹æ€§è´¨çš„å®Œå…¨äºŒå‰æ ‘ï¼š

å¤§é¡¶å †ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½ å¤§äºæˆ–ç­‰äº å…¶å·¦å³å­©å­èŠ‚ç‚¹çš„å€¼

æ³¨ï¼šæ²¡æœ‰è¦æ±‚å·¦å³å€¼çš„å¤§å°å…³ç³»

å°é¡¶å †ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„å€¼éƒ½ å°äºæˆ–ç­‰äº å…¶å·¦å³å­©å­èŠ‚ç‚¹çš„å€¼



![image-20240130192434684](/Users/xiangxuewei/Library/Application Support/typora-user-images/image-20240130192434684.png)

ä¸Šå›¾ä¸­ç»¿è‰²æ¡†æ¡†å°±æ˜¯æ„å»ºä¸€ä¸ªå¤§é¡¶å †ï¼Œå°†æ ‘é‡Œé¢æœ€å¤§ä¸€ä¸ªæ•°å­—æåˆ°æ ‘çš„æœ€é¡¶éƒ¨ã€‚ç„¶åå°†é¡¶éƒ¨çš„æ•°å­—æ”¾åœ¨æ ‘çš„æœ€æœ«å°¾å¹¶åœ¨åç»­çš„æ’é™¤å®ƒï¼Œè¿™æ ·æœ€åå°±å¾—åˆ°ä¸€ä¸ªå‡åºçš„æ•°ç»„ã€‚

```javascript
var findKthLargest = function(nums, k) {
    let heapSize = nums.length
    // è‡ªä¸‹è€Œä¸Šæ„å»ºä¸€é¢—å¤§é¡¶å †
    const buildMaxHeap = (nums, heapSize) => {
        for(let i= Math.floor(heapSize/2)-1;i>=0;i--) {
            maxHeapify(nums,i,heapSize)
        }
    }
    const swap = (a, i, j) => {
        let temp = a[i];
        a[i] = a[j];
        a[j] = temp;
    }
    // ä»å·¦å‘å³ï¼Œè‡ªä¸Šè€Œä¸‹çš„è°ƒæ•´èŠ‚ç‚¹
    const maxHeapify = (nums,i,heapSize) => {
        let l = i*2+1
        let r = i*2+2
        let largest = i
        if(l < heapSize && nums[l] > nums[largest]){
            largest = l
        }
        if(r<heapSize && nums[r] > nums[largest]) {
            largest = r 
        }
        if (largest !== i) {
            swap(nums, i, largest)
            maxHeapify(nums,largest, heapSize)
        }
    }
    buildMaxHeap(nums,heapSize)
    for(let i = nums.length-1;i>= nums.length-k+1;i--) {
        swap(nums, 0, i)
        --heapSize
        maxHeapify(nums, 0, heapSize)
    }
    return nums[0]
};
```

#### æ€»ç»“æ€è·¯
- å°†æ— åºåºåˆ—æ„å»ºæˆä¸€ä¸ªå †ï¼Œæ ¹æ®å‡åºé™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †
- å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ äº¤æ¢ï¼Œå°†æœ€å¤§å…ƒç´ ã€Œæ²‰ã€åˆ°æ•°ç»„æœ«ç«¯
- é‡æ–°è°ƒæ•´ç»“æ„ï¼Œä½¿å…¶æ»¡è¶³å †å®šä¹‰ï¼Œç„¶åç»§ç»­äº¤æ¢å †é¡¶ä¸å½“å‰æœ«å°¾å…ƒç´ ï¼Œåå¤æ‰§è¡Œè°ƒæ•´ã€äº¤æ¢æ­¥éª¤ï¼Œç›´åˆ°æ•´ä¸ªåºåˆ—æœ‰åºã€‚

#### æ­¥éª¤
è¿™é‡Œæƒ³è¯´çš„å‡ ç‚¹æ³¨æ„äº‹é¡¹ï¼ˆä»£ç å®ç°çš„å…³é”®æ€è·¯ï¼‰ï¼š

- ç¬¬ä¸€æ­¥æ„å»ºåˆå§‹å †ï¼šæ˜¯è‡ªåº•å‘ä¸Šæ„å»ºï¼Œä»æœ€åä¸€ä¸ªéå¶å­èŠ‚ç‚¹å¼€å§‹ã€‚

- ç¬¬äºŒæ­¥å°±æ˜¯ä¸‹æ²‰æ“ä½œè®©å°¾éƒ¨å…ƒç´ ä¸å †é¡¶å…ƒç´ äº¤æ¢ï¼Œæœ€å¤§å€¼è¢«æ”¾åœ¨æ•°ç»„æœ«å°¾ï¼Œå¹¶ä¸”ç¼©å°æ•°ç»„çš„lengthï¼Œä¸å‚ä¸åé¢å¤§é¡¶å †çš„è°ƒæ•´

- ç¬¬ä¸‰æ­¥å°±æ˜¯è°ƒæ•´ï¼šæ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³,å› ä¸ºå †é¡¶å…ƒç´ ä¸‹æ²‰åˆ°æœ«å°¾äº†ï¼Œè¦é‡æ–°è°ƒæ•´è¿™é¢—å¤§é¡¶å †

---

#### å¿«æ’åº

**å¿«é€Ÿæ’åºçš„åŸç†**[å‚è€ƒåŸæ–‡](https://stackabuse.com/quicksort-in-javascript/)

- åœ¨æ•°ç»„ä¸­é€‰æ‹©ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªå…ƒç´ è¢«ç§°ä¸º**åŸºå‡†ï¼ˆPivotï¼‰**ã€‚é€šå¸¸æŠŠæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªæˆ–æœ€åä¸€ä¸ªå…ƒç´ ä½œä¸ºåŸºå‡†ã€‚

- ç„¶åï¼Œé‡æ–°æ’åˆ—æ•°ç»„çš„å…ƒç´ ï¼Œä»¥ä½¿åŸºå‡†å·¦ä¾§çš„æœ‰å…ƒç´ éƒ½å°äºåŸºå‡†ï¼Œè€Œå³ä¾§çš„æ‰€æœ‰å…ƒç´ éƒ½å¤§äºåŸºå‡†ã€‚è¿™ä¸€æ­¥ç§°ä¸º**åˆ†åŒº**ã€‚å¦‚æœä¸€ä¸ªå…ƒç´ ç­‰äºåŸºå‡†ï¼Œé‚£ä¹ˆåœ¨å“ªä¸€ä¾§éƒ½æ— å…³ç´§è¦ã€‚

- é’ˆå¯¹åŸºå‡†çš„å·¦ä¾§å’Œå³ä¾§åˆ†åˆ«é‡å¤è¿™ä¸€è¿‡ç¨‹ï¼Œç›´åˆ°å¯¹æ•°ç»„å®Œæˆæ’åºã€‚

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![image-20240131102343206](/Users/xiangxuewei/Library/Application Support/typora-user-images/image-20240131102343206.png)

- å›¾ä¸­ç»¿æ¡†æ¡†è¡¨ç¤ºæ•°ç»„ã€‚é»„è‰²è™šçº¿èƒŒæ™¯è¡¨ç¤ºéšæœºé€‰ä¸­çš„åŸºæ•°

åœ¨æ•°ç»„ä¸­éšæœºé€‰ä¸€ä½æ•°å­—ï¼Œè¿›è¡Œå¤§å°æ¯”è¾ƒï¼Œå·¦å³åˆ†åŒºï¼Œåˆ†åŒºä¹‹åäº§ç”Ÿçš„æ–°æ•°ç»„ï¼Œç»§ç»­éšæœºé€‰æ‹©ä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¿™æ ·é€’å½’ä¸‹å»ä¾æ¬¡æ¯”è¾ƒï¼Œæœ€åå¾—åˆ°æ¯ä¸ªæ•°ç»„éƒ½æ˜¯ä¸€ä¸ªæ•°å­—ã€‚

```javascript
const solveNbig = (arr, k) => {
    // åˆ†åŒºçš„ä»£ç 
    function partition(arr, start, end) {
        // ä»¥æœ€åä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†æˆ–è€…éšæœºé€‰æ‹©ä¸€ä¸ª
        const pivotValue = arr[end];
        let pivotIndex = start;
        for (let i = start; i < end; i++) {
          // åªæœ‰å°äºæ—¶å€™éœ€è¦äº¤æ¢ï¼Œå…¶ä»–æ—¶å€™å°±ä¸éœ€è¦äº¤æ¢
            if (arr[i] < pivotValue) {
                // äº¤æ¢å…ƒç´ 
                [arr[i], arr[pivotIndex]] = [arr[pivotIndex], arr[i]];
                // ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ 
                pivotIndex++;
            }
        }
        // æŠŠåŸºå‡†å€¼æ”¾åœ¨ä¸­é—´
        [arr[pivotIndex], arr[end]] = [arr[end], arr[pivotIndex]]
        return pivotIndex;
    };
     /* 
        ä»£ç ä»¥æœ€åä¸€ä¸ªå…ƒç´ ä¸ºåŸºå‡†ï¼Œç”¨å˜é‡ pivotIndex æ¥è·Ÿè¸ªâ€œä¸­é—´â€ä½ç½®ï¼Œ
        è¿™ä¸ªä½ç½®å·¦ä¾§çš„æ‰€æœ‰å…ƒç´ éƒ½æ¯” pivotValue å°ï¼Œè€Œå³ä¾§çš„å…ƒç´ éƒ½æ¯” pivotValue å¤§ã€‚
        æœ€åä¸€æ­¥æŠŠåŸºå‡†ï¼ˆæœ€åä¸€ä¸ªå…ƒç´ ï¼‰ä¸ pivotIndex äº¤æ¢ã€‚
    */
    // é€’å½’ä»£ç 
    function quickSort(arr, start, end) {
        // ç»ˆæ­¢æ¡ä»¶
        if (start >= end) {
            return;
        }
        // è¿”å› pivotIndex
        let index = partition(arr, start, end);
        // å°†ç›¸åŒçš„é€»è¾‘é€’å½’åœ°ç”¨äºå·¦å³å­æ•°ç»„
        quickSort(arr, start, index - 1);
        quickSort(arr, index + 1, end);
    }
    quickSort(arr,0,arr.length-1);
    return arr[k-1];
}

let arr = [3, 2, 3, 1, 2, 4, 5, 5, 6];
let k = 4;
let res = solveNbig(arr, k);
console.log('res::ğŸ‘‰', res); // res::ğŸ‘‰ 3

```

å…¶ä¸­`quickSort`å¯ä»¥æ›´æ¢æˆå¾ªç¯å®ç°é€’å½’`quickSortIterative`

å¿«é€Ÿæ’åºçš„é€’å½’æ–¹æ³•æ›´åŠ ç›´è§‚ã€‚ä½†æ˜¯ç”¨å¾ªç¯å®ç°å¿«é€Ÿæ’åºæ˜¯ä¸€ä¸ªç›¸å¯¹å¸¸è§çš„é¢è¯•é¢˜ã€‚

ä¸å¤§å¤šæ•°çš„é€’å½’åˆ°å¾ªç¯çš„è½¬æ¢æ–¹æ¡ˆä¸€æ ·ï¼Œæœ€å…ˆæƒ³åˆ°çš„æ˜¯ç”¨æ ˆæ¥æ¨¡æ‹Ÿé€’å½’è°ƒç”¨ã€‚è¿™æ ·åšå¯ä»¥é‡ç”¨ä¸€äº›æˆ‘ä»¬ç†Ÿæ‚‰çš„é€’å½’é€»è¾‘ï¼Œå¹¶åœ¨å¾ªç¯ä¸­ä½¿ç”¨ã€‚

æˆ‘ä»¬éœ€è¦ä¸€ç§è·Ÿè¸ªå‰©ä¸‹çš„æœªæ’åºå­æ•°ç»„çš„æ–¹æ³•ã€‚ä¸€ç§æ–¹æ³•æ˜¯ç®€å•åœ°æŠŠâ€œæˆå¯¹â€çš„å…ƒç´ ä¿ç•™åœ¨å †æ ˆä¸­ï¼Œç”¨æ¥è¡¨ç¤ºç»™å®šæœªæ’åºå­æ•°ç»„çš„ `start` å’Œ `end`ã€‚

JavaScript æ²¡æœ‰æ˜¾å¼çš„æ ˆæ•°æ®ç»“æ„ï¼Œä½†æ˜¯æ•°ç»„æ”¯æŒ `push()` å’Œ `pop()` å‡½æ•°ã€‚ä½†æ˜¯ä¸æ”¯æŒ `peek()`å‡½æ•°ï¼Œæ‰€ä»¥å¿…é¡»ç”¨ `stack [stack.length-1]` æ‰‹åŠ¨æ£€æŸ¥æ ˆé¡¶ã€‚

```javascript
// å¾ªç¯å®ç°é€’å½’
function quickSortIterative(arr1) {
    // ç”¨push()å’Œpop()å‡½æ•°åˆ›å»ºä¸€ä¸ªå°†ä½œä¸ºæ ˆä½¿ç”¨çš„æ•°ç»„
    stack = [];
    // å°†æ•´ä¸ªåˆå§‹æ•°ç»„åšä¸ºâ€œæœªæ’åºçš„å­æ•°ç»„â€
    stack.push(0);
    stack.push(arr1.length - 1);
    // æ²¡æœ‰æ˜¾å¼çš„peek()å‡½æ•°
    // åªè¦å­˜åœ¨æœªæ’åºçš„å­æ•°ç»„ï¼Œå°±é‡å¤å¾ªç¯
    while (stack[stack.length - 1] >= 0) {
        // æå–é¡¶éƒ¨æœªæ’åºçš„å­æ•°ç»„
        end = stack.pop();
        start = stack.pop();
        pivotIndex = partition(arr1, start, end);
        // å¦‚æœåŸºå‡†çš„å·¦ä¾§æœ‰æœªæ’åºçš„å…ƒç´ ï¼Œ
        // åˆ™å°†è¯¥å­æ•°ç»„æ·»åŠ åˆ°æ ˆä¸­ï¼Œä»¥ä¾¿ç¨åå¯¹å…¶è¿›è¡Œæ’åº
        if (pivotIndex - 1 > start) {
            stack.push(start);
            stack.push(pivotIndex - 1);
        }
        // å¦‚æœåŸºå‡†çš„å³ä¾§æœ‰æœªæ’åºçš„å…ƒç´ ï¼Œ
        // åˆ™å°†è¯¥å­æ•°ç»„æ·»åŠ åˆ°æ ˆä¸­ï¼Œä»¥ä¾¿ç¨åå¯¹å…¶è¿›è¡Œæ’åº
        if (pivotIndex + 1 < end) {
            stack.push(pivotIndex + 1);
            stack.push(end);
        }
    }
}
```





